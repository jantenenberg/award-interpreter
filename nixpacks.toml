# Force Python provider so the build has Python/pip (repo also has package.json â†’ Node would win otherwise)
providers = ["python"]

[phases.setup]
nixPkgs = ["python311"]

[phases.install]
# Use a venv to avoid PEP 668; ensure pip in venv then install deps
cmds = [
  "python3 -m venv /opt/venv",
  "/opt/venv/bin/python -m ensurepip --upgrade",
  "/opt/venv/bin/pip install -r backend/requirements.txt"
]
